<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Worm-Blog</title>
	<style>
	body{
		padding: 1rem;
		margin: 0 auto;
		max-width: 640px;
		background: teal;
		}
	a {
		color: red;
		}
		p span{
		text-align: center;
		color: rgb(28, 162, 37);
		font-family: "Courier New", Times, serif;
		}
        p {
		font-family: "Courier New", Times, serif;
        }
		.round3 {
        border: 3px solid #95acca;
        border-radius: 12px;
        padding: 5px;
        background: #e0e3ec;}
	th {
		background-color: rgb(147, 121, 121);
		color: #fff;
	}
		
    td {
        border-top: 1px solid #fff;
		background-color: rgb(147, 121, 121);
    }
    th {
        padding-top: 6px;
        border: 1px solid #fff;

    }
    td:nth-child(2) { 
        color: aqua;
     }
    td:nth-child(1) { 
        padding: 5px;
     }
	</style>
</head>
  <body><h1><img src="Art/Home/comp worm.gif" style="width:100%" /></h1>
<p><a href="index.html">Return Home</a></p>

<div class="round3" style="text-align: center;">
<p><strong>c u r l y</strong></p>
<p><strong><small>Submiting forms with curl POST command</small></strong></p>
</div>
<p style="text-align: center;"><small>November 13, 2025</small></p>

<div class="round3">
	<p>Potential Use Case: signing in/accepting "terms of service" on public wifi networks without using a browser. </p>
</div>
<br>
<div class="round3">
	<p>Step 1 :<br>
	find the elements on the webpage you need to interact with. Either with curl "https://example.com" and looking through the html directly<br><br>
OR - (easier)<br>
open webpage in a browser and right click on element (text box, etc. ) -> "inspect"<br>
<br>What we are looking for is the "name" of these input fields. (see image below)
<img src="Art/cl/inspectElement.png" style="width: 100%;">
<br>We will use this name and pair it with what we want to input in that field, into our JSON. Which follows the format <br>
{"key1": "value1", "key2": "value2"}
</p>
</div>
<div class="round3">
	<p>Now we can start building our curl command. The basic parts we will use are: </p>
	<table>
		<th>argument</th><th>description</th>
		<tr>
			<td>-X POST</td>
			<td>tells curl we will be sending data</td>
		</tr>
		<tr>
			<td>-H "Content-Type: application/json"</td>
			<td>tells curl the data type</td>
		</tr>
		<tr>
			<td>-d 'ur data go here'</td>
			<td>the data in question</td>
		</tr>
	</table>
	<br>
	<p>curl -X POST <span>www.website.com</span> -H "Content-Type: application/json" -d '{<span>your json data goes here</span>}'</p>
</div>
<div class="round3">
	<p>
		<a href="https://httpbin.org/post">https://httpbin.org/post</a><br><br>This is a useful example website to make sure your sending the correct data. It simply echos back a JSON response to what you send it. <br>
		<br>
		testing out our command:<br><br>
		curl -X POST https://httpbin.org/post -H "Content-Type: application/json" -d '{"login": "Organism", "password": "CryptOrchid", "accept_terms": true}'<br>
		<br><br><img src="Art/cl/curlPost.png" style="width: 100%;"><br>
	as you can see within the "json" { } brackets, the testing website echos it back correctly.</p>
</div>
<div class="round3">
	<p>
		-------------in progress-----------------<br>
		<p>You may get a server response of "csrf-Token missing". To get past this you will need to get the token from the curl response previously and then send it with your data.<br>
		<br>
	<p>I am testing on the Fedora linux account login website</p>
	<p>First I create a variable called TOKEN, curl the website and then pipe it into a grep command which searches for the hidden input field of the token. I then use the cut command and a few reverses to trim off the leading and trailing quotes so only the token itself goes into my variable "TOKEN"</p>
	<p><span>TOKEN=$(curl https://accounts.fedoraproject.org/ | grep -oP 'name="login-csrf_token" type="hidden" value="\K.*' | rev| cut -c 3- | rev)</span></p>
	<p>next step is to send the data with the token</p>
	<p><span>
		curl --data "login-username=my_username&login-password=my_password&login-csrf_token=$TOKEN" "https://accounts.fedoraproject.org/"
	</span></p>
	</p>
</div>
<div class="round3">

	<br>
	<p style="color: red;"> This is semi-working, in the sense the token is getting properly sent to the server. But, it returns an error code "token mismatch". The reason being I think is that when I curl to send the data it starts a new "session" and there for generates a brand new token. I'm not certain how a person can either combine these two commands to be 1 session or what?? </p>
</div>
<p><a href="index.html">Return Home</a></p>
 
 </body>
</html>